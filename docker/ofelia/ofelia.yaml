services:
  crisalid-ofelia:
    # Overriden by environment specific YAML configurations (e.g. docker-compose.dev.yaml)
    # image: mcuadros/ofelia:0.3
    container_name: crisalid-ofelia
    restart: unless-stopped

    command: daemon --config=/etc/ofelia/config.ini

    volumes:
      - ./${CONFIG_FILE_NAME}:/etc/ofelia/config.ini:ro
      - /var/run/docker.sock:/var/run/docker.sock

    networks:
      - crisalid-back
    profiles:
      - ofelia
    depends_on:
      crisalid-ikg:
        condition: service_healthy

networks:
  crisalid-back:
    driver: bridge
